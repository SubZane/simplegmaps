/*! simplegmaps - v2.0 - 2016-01-24
* https://github.com/SubZane/simplegmaps
* Copyright (c) 2016 Andreas Norman; Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],b(a)):"object"==typeof exports?module.exports=b(a):a.simplegmaps=b(a)}("undefined"!=typeof global?global:this.window||this.global,function(a){"use strict";var b,c,d,e,f,g={},h=!!document.querySelector&&!!a.addEventListener,i={MapOptions:{draggable:!0,zoom:2,center:"55.604981,13.003822",scrollwheel:!1,streetViewControl:!1,panControl:!0,zoomControl:!0,zoomControlOptions:{style:"DEFAULT"}},onInit:function(){},OnAttachEvents:function(){},onDestroy:function(){}},j=function(){f=d.cloneNode(!0),e=new google.maps.Map(d,b.MapOptions)},k=function(){var a=f.querySelectorAll(".map-marker");p(a,function(a,b){var c={},f=new google.maps.Marker({title:a.getAttribute("title")});if(a.matches(".map-infowindow")){var g=new google.maps.InfoWindow({content:a.querySelector("div.map-infowindow").parent().innerHTML});google.maps.event.addListener(f,"click",function(){g.open(e,f)})}else if(a.matches(".map-custom-infowindow")){var h=a.querySelector(".map-custom-infowindow").parent().innerHTML;google.maps.event.addListener(f,"click",function(){document.querySelector("#simplegmaps-c-iw").remove(),d.insertAdjacentHTML("afterend",'<div id="simplegmaps-c-iw"></div>'),document.querySelector("#simplegmaps-c-iw").innerHTML=h,document.querySelector("#simplegmaps-c-iw .close").addListener("click",function(a){a.preventDefault(),document.querySelector("#simplegmaps-c-iw").remove()})})}a.hasAttribute("data-icon")&&a.hasAttribute("data-icon2x"),l(a,function(a){c.position=a,console.log(c),f.setOptions(c),f.setMap(e)})})},l=function(a,b){if(console.log(a),a.hasAttribute("data-latlng"))b(m(a.getAttribute("data-latlng")));else if(a.hasAttribute("data-address")){var c=new google.maps.Geocoder;c.geocode({address:a.getAttribute("data-address")},function(a,c){c===google.maps.GeocoderStatus.OK&&b(a[0].geometry.location)})}},m=function(a){var b=a.split(/,\s*/),c=new google.maps.LatLng(parseFloat(b[0]),parseFloat(b[1]));return c},n=function(a){void 0!==b[a]&&b[a].call(d)},o=function(a,b){var c={};return p(a,function(b,d){c[d]=a[d]}),p(b,function(a,d){c[d]=b[d]}),c},p=function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);else for(var e=0,f=a.length;f>e;e++)b.call(c,a[e],e,a)};return g.destroy=function(){b&&(document.documentElement.classList.remove(b.initClass),document.removeEventListener("click",eventHandler,!1),b=null,c=null,n("onDestroy"))},g.init=function(a){h&&(g.destroy(),b=o(i,a||{}),d=document.querySelector(b.container),b.MapOptions.center&&(b.MapOptions.center=m(b.MapOptions.center)),b.MapOptions.zoom||(b.MapOptions.zoom=4),j(),k(),n("onInit"))},g.publicMethod=function(){},g});